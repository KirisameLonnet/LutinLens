# AI测试模式使用说明

## 概述
AI测试模式是用于测试AI建议功能的模拟模式，无需连接到真实的AI服务器即可体验完整的AI建议功能。

## 功能特点

### 1. 模拟响应序列
测试模式会按照以下顺序循环播放建议：
- **向左移动** (5秒) → 显示"向左移动相机以获得更好的构图"
- **绿色对勾** (5秒) → 显示"完美！现在可以拍摄了" + 绿色对勾图标
- **向右移动** (5秒) → 显示"向右移动相机调整拍摄角度"

### 2. 建议显示规则
- 非ready_to_shoot状态的建议内容会在显示1.5秒后自动隐藏
- ready_to_shoot=1状态（绿色对勾）会持续显示直到下一个周期

### 3. 日志输出
测试模式会在控制台输出详细的调试信息：
- 发送请求日志（模拟发送到127.0.0.1:1234）
- 当前建议状态变化
- 测试周期转换信息

## 使用方法

### 1. 启用测试模式
1. 打开应用设置页面
2. 在"AI设置"部分找到"AI测试模式"开关
3. 开启该开关
4. 确保"AI智能建议"也已开启

### 2. 观察效果
返回相机页面后，右下角的AI建议窗口会：
- 每5秒自动切换建议内容
- 在绿色对勾状态显示大型绿色勾选图标
- 在建议状态显示相应的移动建议文字

### 3. 调试信息
查看Flutter调试控制台可以看到：
```
[AI] 测试模式已启动
[AI] 发送测试请求到 127.0.0.1:1234
[AI] 测试模式: 向左移动建议
[AI] 发送测试请求到 127.0.0.1:1234
[AI] 测试模式: 准备拍摄 (绿色对勾)
[AI] 发送测试请求到 127.0.0.1:1234
[AI] 测试模式: 向右移动建议
```

## 实现细节

### 代码位置
- **服务逻辑**: `lib/src/services/ai_suggestion_service.dart`
- **UI设置**: `lib/src/pages/settings_page.dart`
- **配置管理**: `lib/src/utils/preferences.dart` 和 `lib/src/globals.dart`

### 主要方法
- `_startTestMode()`: 启动测试模式定时器
- `_simulateTestResponse()`: 模拟AI响应数据
- `_aiTestModeTile()`: 设置页面的测试模式开关UI

### 配置存储
测试模式状态保存在SharedPreferences中，键名为'aiTestMode'。

## 注意事项

1. **与真实服务器互斥**: 测试模式开启时不会向真实AI服务器发送请求
2. **需要重启应用**: 更改测试模式设置后可能需要重新启动AI服务才能生效
3. **仅用于开发测试**: 此功能主要用于开发和测试阶段，生产环境建议关闭
